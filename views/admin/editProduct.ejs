<%- include('../admin/layouts/header.ejs') %>
  <div class="main-panel">
    <div class="content-wrapper">




      <div class="col-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Edit Product</h4>
            <!-- <p class="card-description"> Basic form elements </p> -->
            <form class="forms-sample " action="/admin/books/edit/<%= product._id %>?_method=PUT" method="post"
              enctype="multipart/form-data" onsubmit="return validateEditProductForm()">

              <div class="form-group  row">
                <div class="col-6  text-light">
                  <label for="exampleInputName1">Book name</label>
                  <input type="text" class="form-control  text-light" name="name"
                    value="<%= product.name %>" id="exampleInputName1" placeholder="Name" >
                </div>
                <div class="col-6">
                  <label for="exampleInputName1">Price</label>
                  <input type="number" class="form-control text-light" id="exampleInputName1"
                    value="<%= product.price %>" name="price" placeholder="price" >
                </div>

              </div>

              <!-- categories  -->
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <label class="col-sm-3 col-form-label">Category</label>
                      <select name="category" class="form-control text-light" required>
                        <option selected ><%= product.category  %></option>
                        <% for( let i = 0; i < categories.length; i++ ) { %>
                          <option value="<%= categories[i].categoryName %>"><%= categories[i].categoryName %></option>
                        <% } %>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <label class="col-sm-3 col-form-label">Author</label>
                      <input type="text" class="form-control text-light" value="<%=product.author  %>" name="author">
                    </div>
                  </div>
                </div>
              </div>

              <!-- stocks  -->
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <label class="col-sm-3 col-form-label">Number of Stock</label>
                      <input type="number" value="<%= product.stock %>" class="form-control text-light"
                        id="exampleInputName1" name="stock" placeholder="Enter Stock" >
                    </div>
                  </div>
                </div>
              </div>

              <!-- discount  -->

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group row">
                    <div class="col-sm-12">
                      <label class="col-sm-3 col-form-label">Discount</label>
                      <input type="number" value="<%= product.discount %>" class="form-control text-light"
                        id="exampleInputName1" name="discount" placeholder="Enter Stock" >
                    </div>
                  </div>
                </div>
              </div>

              <!-- description  -->
              <div class="form-group mt-2">
                <label for="exampleTextarea1">Description</label>
                <textarea name="description" value="<%= product.description %>" class="form-control text-light"
                  id="exampleTextarea1" rows="6" ><%= product.description %></textarea>
              </div>
              <div class="">
                <!-- <label class="col-sm-3 col-form-label">Images</label> -->
                <div class="row d-flex justify-content-center ">

              


                  <!-- Image Upload 1 -->
                  <div class="col-lg-3 col-md-6">
                    <div class="rounded-image-preview">
                      <label for="imageInput1" class="image-label">Image 1
                        <div class="rounded-image-preview">
                          <img id="imagePreview1" src="/products/images/<%= product.imageUrl[0] %>" alt="Preview" />
                        </div>
                        <input name="image1" type="file" accept="image/*" id="imageInput1" class="imageInput"
                          onchange="updateImagePreview(this, 'imagePreview1', '/products/images/<%= product.imageUrl[0] %>', 'removeButton1')">
                      </label>
                    </div>
                    <button type="button" style="display: none;" class="remove-button" id="removeButton1"
                      onclick="removeImagePreview('imagePreview1', '/products/images/<%= product.imageUrl[0] %>', 'removeButton1','imageInput1')">Remove</button>
                  </div>

                  <!-- Image Upload 2 -->
                  <div class="col-lg-3 col-md-6">
                    <div class="rounded-image-preview">
                      <label for="imageInput2" class="image-label">Image 2
                        <div class="rounded-image-preview">
                          <img id="imagePreview2" src="/products/images/<%= product.imageUrl[1] %>" alt="Preview" />
                        </div>
                        <input name="image2" type="file" accept="image/*" id="imageInput2" class="imageInput"
                          onchange="updateImagePreview(this, 'imagePreview2', '/products/images/<%= product.imageUrl[1] %>', 'removeButton2')">
                      </label>
                    </div>
                    <button type="button" style="display: none;" class="remove-button" id="removeButton2"
                      onclick="removeImagePreview('imagePreview2', '/products/images/<%= product.imageUrl[1] %>', 'removeButton2','imageInput2')">Remove</button>
                  </div>
                  <!-- Repeat similar code for Image Upload 3 and 4 with unique IDs -->
                  <div class="col-lg-3 col-md-6">
                    <div class="rounded-image-preview">
                      <label for="imageInput3" class="image-label">Image 3
                        <div class="rounded-image-preview">
                          <img id="imagePreview3" src="/products/images/<%= product.imageUrl[2] %>" alt="Preview" />
                        </div>
                        <input name="image3" type="file" accept="image/*" id="imageInput3" class="imageInput"
                          onchange="updateImagePreview(this, 'imagePreview3', '/products/images/<%= product.imageUrl[2] %>', 'removeButton3')">
                      </label>
                    </div>
                    <button type="button" style="display: none;" class="remove-button" id="removeButton3"
                      onclick="removeImagePreview('imagePreview3', '/products/images/<%= product.imageUrl[2] %>', 'removeButton3','imageInput3')">Remove</button>
                  </div>

                  <div class="col-lg-3 col-md-6">
                    <div class="rounded-image-preview">
                      <label for="imageInput4" class="image-label">Image 4
                        <div class="rounded-image-preview">
                          <img id="imagePreview4" src="/products/images/<%= product.imageUrl[3] %>" alt="Preview" />
                        </div>
                        <input name="image4" type="file" accept="image/*" id="imageInput4" class="imageInput"
                          onchange="updateImagePreview(this, 'imagePreview4', '/products/images/<%= product.imageUrl[3] %>', 'removeButton4')">
                      </label>
                    </div>
                    <button type="button" style="display: none;" class="remove-button" id="removeButton4"
                      onclick="removeImagePreview('imagePreview4', '/products/images/<%= product.imageUrl[3] %>', 'removeButton4','imageInput4')">Remove</button>
                  </div>



                </div>




              </div>


              <button type="submit" class="btn btn-lg btn-primary mr-2 mt-5">Update product</button>
            </form>
          </div>
        </div>
      </div>


    </div>
    <!-- content-wrapper ends -->
    <!-- partial:partials/_footer.html -->
    <footer class="footer">
      <div class="content-wrapper ">
        <div id="FormAlert" data-aos="fade-down" class="alert alert-danger col-md-4 col-8 mx-auto fixed-top "
        style="display: none;  top:30px; border-radius: 7px; opacity: 0.9; " role="alert">
        <h6 class="alert-heading text-center">Please provide only valid data.</h6>
        <hr>
        <span class="row "><i class="fa-sharp fa-light fa-circle-xmark fa-shake" style="color: #ff0505; font-size: 18px;"></i> &nbsp;&nbsp;&nbsp; <p id="ValidErrMess"></p></span>
         
    </div>
    </footer>
    <!-- partial -->
  </div>

  <%- include('../admin/layouts/footer.ejs') %>